# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

Архитектура приложенияАрхитектура приложенияАрхитектура приложения

## Паттерн разработки пользовательского интерфейса - MVP
В нём приложение делится на три основных компонента:
1.	Модель (model) отвечает за получение данных, композирует апи, выполняет все действия с данными, хранит актуальное состояние
2.	Вид или Представление (view) отвечает за вывод данных на экран в нужном виде, сообщает о событиях (но ничего с ними не делает)
3.	Представитель (presenter) служит прослойкой между моделью и представлением. Код презентера не будет выделен в отдельный класс и будет размещен в скрипте index-ts

## Основные части архитектуры проекта
- данные – определяют состояние и логику приложения
- отображение – отвечает за вывод данных пользователю, чтобы он мог с ними взаимодействовать
- промежуточные системы – механизмы взаимодействия пользователя с элементами приложения
- сервер – место хранения данных, отвечает за прием, обновление и отправку данных  


## Анализ приложения:
1.  Главная страница:
- корзина со счетчиком, в ней отображается количество выбранных товаров
- блок с карточками товара, из которых можно выбирать и при клике будет открываться карточка нужного товара
- карточки товара содержат категорию (category), название (title), изображение (image), стоимость (price)

2.  Информация о товаре
При нажатии на карточку товара открывается модальное окно с информацией о товаре. Это контейнер, он будет повторяться для всех карточек, таким образом, это компонент (ProductItem). Внутри него мы будем отображать информацию о товаре. Каждое модальное окно будет включать в себя информацию из карточки товара (категорию (category), название (title), изображение (image), стоимость (price)), а также дополнительно еще описание (description) и действия (кнопка «Купить/В корзину?», кнопка закрытия модального окна).

3.	Открытие Корзины. В корзину мы можем попасть через счетчик или после добавления товара в корзину. В корзине мы видим список товаров, по каждому товару указано название (title), стоимость (price), общую стоимость (total). 
Возможные действия в этом шаге:
- каждый товар можно по-отдельности удалить
- оформить заказ (кнопка «Оформить»)
- кнопка закрытия модального окна Корзины

4.	Оформление заказа: необходимо заполнить адрес доставки, выбрать способ оплаты (онлайн или при получении). При выполнении этих действий кнопка «Далее» становится активной и можно перейти к следующему шагу.

5.	Заполнение контактных данных (email, телефон). При выполнении этих действий кнопка «Оплатить» становится активной и можно перейти к следующему шагу.

6.	Экран успеха. Выводится общая стоимость купленных товаров (total). Это окно можно использовать в других проектах, поэтому вынесем его в общие компоненты.

## Данные, используемые в приложении
## Интерфейсы:
- IMainPage - - интерфейс главной страницы магазина
- IProductItem - интерфейс карточки товара
- IBasketModel - интерфейс корзины товаров
- IOrderData - интерфейс со всеми данными заказа и покупателя
- IAddressForm - интерфейс с данными покупателя (адрес и способ оплаты)
- IContactsForm интерфейс с данными покупателя (контактные данные)
- IOrderSuccess - интерфейс успешного оформления заказа (экран успеха)
- IAppState – интерфейс текущего состояния приложения 

## Базовые классы:
1. MainPage - класс, отвечающий за отображение главной страницы магазина.

Поля и методы, реализуемые классом:
- _counter: HTMLElement - счетчик товаров в корзине
- _catalog: HTMLElement - контейнер для карточек товаров
- _wrapper: HTMLElement - контейнер-обертка главной страницы, используется для блокироваки прокрутки страницы
- _basket: HTMLElement - контейнер корзины
- set сounter(value: number) - сеттер для счетчика товаров в корзине, отображает кол-во товаров
- set сatalog(items: HTMLElement[]) - сеттер для отображения карточек товара на главной странице магазина
- set locked(value: boolean) - сеттер для блокироваки прокрутки страницы

2. ProductItem - класс, отвечающий за отображение карточки товара.

Поля и методы, реализуемые классом:
- _description?: HTMLElement - элемент для описания товара
- _image: HTMLImageElement - элемент для изображения товара
- _title: HTMLElement - элемент для названия товара
- _category: HTMLElement - элемент для категории товара
- _price: HTMLElement - элемент для цены товара
- _button: HTMLButtonElement - элемент кнопки карточки товара
- set id(value: string) - сеттер, устанавливает ID товара
- get id(value: string) - геттер, получает ID товара
- set title(value: string) - сеттер, устанавливает название товара
- get title(value: string) - геттер, получает название товара
- set image(value: string) - сеттер, устанавливает изображение товара
- set price(value: number | null) - сеттер, устанавливает цену на товар
- set category(value: ProductCategory) - сеттер, устанавливает категорию товара
- set description(value: string) - сеттер, устанавливает описание товара

3. Basket - класс, отвечающий за работу корзины, обеспечивает отображение выбранных товаров в заказе и их общей стоимостю.

Поля и методы, реализуемые классом: 
- _selectedList: HTMLElement[] - массив элементов с товаром
- _total: HTMLElement - элемент для общей стоимости выбранных товаров
- _button: HTMLButtonElement - элемент кнопки корзины ("Оформить")
- set total(value: number) - сеттер, отображает общую стоимость выбранных товаров
- set selectedList(items: HTMLElement[]) - сеттер, отображает выбранные товары

4. AddressForm - класс, отвечающий за работу формы заказа, в которой пользователь выбирает способ оплаты и указывает адрес.

Поля и методы, реализуемые классом:
- _address: HTMLInputElement - элемент для ввода адреса
- _online: HTMLButtonElement - кнопка выбора оплаты онлайн
- _whenReceived: HTMLButtonElement - кнопка выбора оплаты при получении
- set address(value: string) - сеттер, отображает адрес

5. ContactsForm - класс, отвечающий за работу формы заказа, в которой пользователь указывает конткактные данные (email и телефон).

Поля и методы, реализуемые классом:
- _phone: HTMLInputElement - элемент для ввода телефона
- _email: HTMLInputElement - - элемент для ввода email
- set phone(value: string) - сеттер, отображает телефон
- set email(value: string) - сеттер, отображает email

6. OrderSuccess - класс, отвечающий за отображение экрана успеха, отображает общую стоимость купленных товаров (total).

Поля и методы, реализуемые классом:
- _paymentConfirmation: HTMLElement - элемент, отображающий успешный результат списания оплаты с общей стоимостью товаров
- _button: HTMLButtonElement - элемент кнопки экрана успеха "За новыми покупками!"
- set paymentConfirmation(value: number) - сеттер, отображающий сообщение о списании

7. AppState - главная модель данных, обеспечивает работу всего приложения и связь всех компонтентов, управляет корзиной, сбором и проверкой данных для оформления заказа.

Поля и методы, реализуемые классом:
- catalog: IProductItem[] - массив карточек товара на главной странице магазине
- basket: IProductItem[] - массив товаров в корзине
- orderData: IOrderData - заказанный товар
- addToBasket(item: HTMLElement): void - добавить в корзину товар
- deleteFromBasket(id: string): void - удалить из корзины товар
- cleanBasket(): void - полностью очистить корзину
- getBasketCounter(): number - калькулятор количества товаров в корзине
- getBasketTotal(): number - калькулятор общей стоимости товаров в корзине
- setOrderField(field: keyof IOrderForm, value: string): void - метод для заполнения полей Форм с адресом и контактами
- validateAddressForm(): boolean  - валидация Формы с адресом покупателя и методом оплаты
- validateContactsForm(): boolean - валидация Формы с контактами покупателя

8. EventEmitter - обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

Поля и методы, реализуемые классом:
- on<T extends object>(eventName: EventName, callback: (event: T) => void) - установка обработчика на событие
- off(eventName: EventName, callback: Subscriber) - снятие обработчика на событие
- emit<T extends object>(eventName: string, data?: T) - инициация события с данными

9. Api - обеспечивает взаимодействие с сервером, выполняет GET и POST запросы для получения данных и отправки данных (заказа).

Поля и методы, реализуемые классом:
- get(uri: string) - отправка GET-запроса
- post(uri: string, data: object) - отправка POST-запроса

10. Component<T> - базовый класс, отвечает за инструментарий для работы с DOM в дочерних компонента (помогает переключить класс, установить текстовое содержимое, сменить статус блокировки и т.д.).

Поля и методы, реализуемые классом:
- toggleClass(element: HTMLElement, className: string, force?: boolean): void  - переключает класс на элементе
- setText(element: HTMLElement, value: unknown): void - устанавливает текстовое содержимое
- setDisabled(element: HTMLElement, state: boolean): void - меняет статус блокировки
- setHidden(element: HTMLElement): void - скрывает элемент
- setVisible(element: HTMLElement): void - показывает элемент

## Процессы в приложении реализованы через события (событийно-ориентированный подход)
1. Действия на главной странице:
- загрузить список карточек
- выбрать товар
- открыть карточку товара
- открыть корзину

2. Выбор товаров:
- выбрать товар
- положить товар в корзину или закрыть окно товара

3. Редактирование списка товаров в корзине:
- удалить лишние товары
- перейти к оформлению заказа

4. Оформление заказа:
- выбор способа оплаты
- заполнение адреса
- заполнение email
- заполнение телефона
- оплатить (отправить) заказ